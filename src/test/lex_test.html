<html>
  <head>
    <title>JSONSelect JS lex tests</title>
    <link rel="stylesheet" type="text/css" href="../doctestjs/doctest.css" />
    <script src="../doctestjs/doctest.js"></script>
    <script src="../lex.js"></script>
  </head>
  <body>

<div>
  <button onclick="doctest()" type="button">run tests</button>
  <pre id="doctestOutput"></pre>
</div>

    <h2> Tests of the JSONSelect lexer </h2>

<div class="test">
Simple tokens
<pre class="doctest">
$ JSONSelect.lex(">");
[1, ">"]
$ JSONSelect.lex("~");
[1, "~"]
$ JSONSelect.lex("*");
[1, "*"]
$ JSONSelect.lex(",");
[1, ","]
$ JSONSelect.lex("#");
[1, "#"]
</pre>
</div>

<div class="test">
Offsets
<pre class="doctest">
$ JSONSelect.lex("foobar>",6);
[7, ">"]
</pre>
</div>

<div class="test">
Tyeps
<pre class="doctest">
$ JSONSelect.lex("string");
[6, "string"]
$ JSONSelect.lex("boolean");
[7, "boolean"]
$ JSONSelect.lex("null");
[4, "null"]
$ JSONSelect.lex("array");
[5, "array"]
$ JSONSelect.lex("object");
[6, "object"]
$ JSONSelect.lex("number");
[6, "number"]
</pre>
</div>

<div class="test">
Whitespace
<pre class="doctest">
$ JSONSelect.lex("\r");
[1, " "]
$ JSONSelect.lex("\n");
[1, " "]
$ JSONSelect.lex("\t");
[1, " "]
$ JSONSelect.lex(" ");
[1, " "]
$ JSONSelect.lex("     \t   \r\n  !");
[13, " "]
</pre>

<div class="test">
psuedo classes
<pre class="doctest">
$ JSONSelect.lex(":root");
[5, ":root"]
$ JSONSelect.lex(":first-child");
[12, ":first-child"]
$ JSONSelect.lex(":last-child");
[11, ":last-child"]
$ JSONSelect.lex(":only-child");
[11, ":only-child"]
</pre>
</div>

<div class="test">
json strings
<pre class="doctest">
$ JSONSelect.lex('"foo bar baz"');
[13, 0, "foo bar baz"]
$ JSONSelect.lex('"\\u0020"');
[8, 0, " "]
$ JSONSelect.lex('\"not terminated');E
Error: unclosed json string
$ JSONSelect.lex('"invalid escape: \\y"');
Error: invalid json string
</pre>
</div>

<div class="test">
identifiers (like after '#')
<pre class="doctest">
$ JSONSelect.lex("foo");
[3, 0, "foo"]
$ JSONSelect.lex("foo\\ bar");
[8, 0, "foo bar"]
$ JSONSelect.lex("_aB129bcde-\\:foo\\@$");
[18, 0, "_aB129bcde-:foo@"]
</pre>
</div>


  </body>
</html>
