<html>
  <head>
    <title>JSONSelect JS lex tests</title>
    <link rel="stylesheet" type="text/css" href="../doctestjs/doctest.css" />
    <script src="../doctestjs/doctest.js"></script>
    <script src="../lex.js"></script>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  </head>
  <body>

<div>
  <button onclick="doctest()" type="button">run tests</button>
  <pre id="doctestOutput"></pre>
</div>

    <h2> Tests of the JSONSelect lexer </h2>

<div class="test">
Simple tokens
<pre class="doctest">
$ JSONSelect._lex(">");
[1, ">"]
$ JSONSelect._lex("~");
[1, "~"]
$ JSONSelect._lex("*");
[1, "*"]
$ JSONSelect._lex(",");
[1, ","]
$ JSONSelect._lex("#");
[1, "#"]
</pre>
</div>

<div class="test">
Offsets
<pre class="doctest">
$ JSONSelect._lex("foobar>",6);
[7, ">"]
</pre>
</div>

<div class="test">
Tyeps
<pre class="doctest">
$ JSONSelect._lex("string");
[6, "string"]
$ JSONSelect._lex("boolean");
[7, "boolean"]
$ JSONSelect._lex("null");
[4, "null"]
$ JSONSelect._lex("array");
[5, "array"]
$ JSONSelect._lex("object");
[6, "object"]
$ JSONSelect._lex("number");
[6, "number"]
</pre>
</div>

<div class="test">
Whitespace
<pre class="doctest">
$ JSONSelect._lex("\r");
[1, " "]
$ JSONSelect._lex("\n");
[1, " "]
$ JSONSelect._lex("\t");
[1, " "]
$ JSONSelect._lex(" ");
[1, " "]
$ JSONSelect._lex("     \t   \r\n  !");
[13, " "]
</pre>

<div class="test">
psuedo classes
<pre class="doctest">
$ JSONSelect._lex(":root");
[5, ":root"]
$ JSONSelect._lex(":first-child");
[12, ":first-child"]
$ JSONSelect._lex(":last-child");
[11, ":last-child"]
$ JSONSelect._lex(":only-child");
[11, ":only-child"]
</pre>
</div>

<div class="test">
json strings
<pre class="doctest">
$ JSONSelect._lex('"foo bar baz"');
[13, 0, "foo bar baz"]
$ JSONSelect._lex('"\\u0020"');
[8, 0, " "]
$ JSONSelect._lex('\"not terminated');E
Error: unclosed json string
$ JSONSelect._lex('"invalid escape: \\y"');
Error: invalid json string
</pre>
</div>

<div class="test">
identifiers (like after '#')
<pre class="doctest">
$ JSONSelect._lex("foo");
[3, 0, "foo"]
$ JSONSelect._lex("foo\\ bar");
[8, 0, "foo bar"]
$ JSONSelect._lex("_aB129bcde-\\:foo\\@$");
[18, 0, "_aB129bcde-:foo@"]
</pre>
</div>

<div class="test">
non-ascii
<pre class="doctest">
$ JSONSelect._lex("обичам\\ те\\!");
[12, 0, "обичам те!"]
</pre>
</div>

  </body>
</html>
